import{quoted as e,ValueIsNonEmptyString as t,ValueIsPlainObject as i,ValueIsString as n,ValueIsListSatisfying as o,ValueIsFunction as l,allowOrdinal as s,expectArray as r,allowFunction as a,allowTextline as d,allowListSatisfying as u,ValueIsOrdinal as p,expectFunction as h,allowOneOf as g,ValueIsArray as c}from"javascript-interface-library";import{render as $,html as x,Component as y}from"htm/preact";import m from"hyperactiv";function f(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}const w=["Id","Classes","Style","x","y","z","Width","Height","Title","closeable","View","WidgetList"],b=["Id","Classes","Style","x","y","z","Width","Height","Title","closeable","minWidth","minHeight","maxWidth","maxHeight","View","WidgetList"],W=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","hidden","View","WidgetList"],S=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","hidden","View","WidgetList"],P=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],V=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],v=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],I=["Id","Type","Classes","Style","x","y","Width","Height","Value","View","WidgetList"],U=["Id","Type","Classes","Style","x","y","Width","Height","Value","View","WidgetList"],X=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","ImageScaling","ImageAlignment","WidgetList","View"],D=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","PermissionsPolicy","allowsFullscreen","SandboxPermissions","ReferrerPolicy","WidgetList","View"],T=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Color","disabled","onClick","View"],C=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Color","Options","disabled","onInput","View"],k=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],_=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],H=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],A=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],L=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],M=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Hashmarks","View"],N=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],F=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],E=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],z=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],O=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],R=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],B=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],j=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],Y=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],G=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],K=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],Z=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],q=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View","Placeholder","onDrop"],J=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Suggestions","View"],Q=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Options","Placeholder","View"],ee=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View"],te=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","onDrop","View","WidgetList"],ie=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","View","WidgetList"],ne=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","Expansion","View","WidgetList"],oe=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View","WidgetList"],le=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View","WidgetList"],se=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View","WidgetList"],re=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","Value","View","WidgetList"],ae=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","List","ItemRenderer","Placeholder","selectedIndices","SelectionLimit","onSelectionChange","onItemSelected","onItemDeselected","View","WidgetList"],de=["Id","Type","Classes","Style","Anchoring","x","y","Width","Height","List","ItemRenderer","Placeholder","LabelOfItem","ContentListOfItem","selectedPaths","SelectionLimit","SelectionMode","onSelectionChange","onItemSelected","onItemDeselected","onItemDoubleClicked","expandedPaths","Indentation","onExpansionChange","onItemExpanded","onItemCollapsed","View","WidgetList"],ue=["Id","Type","Classes","Style","x","y","Width","Height","Substitute","Placeholder","View","WidgetList"];let pe,he,ge,ce,$e,xe,ye,me,fe,we,be,We,Se,Pe,Ve,ve,Ie,Ue,Xe,De,Te,Ce,ke,_e,He,Ae,Le,Me,Ne,Fe,Ee,ze,Oe,Re,Be,je,Ye,Ge,Ke,Ze,qe,Je,Qe,et,tt,it,nt,ot,lt,st,rt,at,dt,ut,pt,ht,gt,ct,$t,xt,yt,mt,ft,wt,bt,Wt,St,Pt,Vt,vt,It,Ut,Xt,Dt,Tt,Ct,kt,_t,Ht,At,Lt,Mt,Nt,Ft,Et,zt,Ot,Rt,Bt,jt,Yt,Gt,Kt,Zt,qt,Jt,Qt,ei,ti,ii,ni,oi,li,si,ri,ai,di,ui,pi,hi,gi,ci,$i,xi,yi=e=>e;const{observe:mi,computed:fi}=m,wi=document.createElement("style");function bi(e){let t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);{let e=new Error(t[2]);throw e.name=t[1],e}}function Wi(t){bi("ReadOnlyProperty: property "+e(t)+" must not be set")}wi.setAttribute("id","ProtoUX"),wi.innerHTML="/*******************************************************************************\n*                                                                              *\n*                                ProtoUX (PUX)                                 *\n*                                                                              *\n*******************************************************************************/\n\n  .PUX {\n    display:block; position:absolute;\n    margin:0px;\n    background:none;\n    border:none; border-radius:0px;\n    box-shadow:none;\n    padding:0px;\n  }\n\n  .PUX.Screen {\n    background:white; color:black;\n    font-family:'Source Sans Pro','Helvetica Neue',Helvetica,Arial,sans-serif;\n    font-size:14px; font-weight:normal; line-height:1.4; color:black;\n    text-align:left; text-shadow:none;\n  }\n\n  .textured { background-image:repeat }\n\n  .vertically-centered {\n    display:flex; align-items:center;\n  }\n\n  .disabled, [disabled] { opacity:0.3 }\n  .readonly             { background:none }\n  .no-pointer-events    { pointer-events:none }\n\n  .scrollable   { overflow:scroll }\n  .scrollable-x { overflow-x:scroll; overflow-y:hidden }\n  .scrollable-y { overflow-x:hidden; overflow-y:scroll }\n\n  .PUX.Box       { background-color:white }\n  .PUX.Container {}\n  .PUX.Group     {}\n\n  .PUX.Title    { font-size:20px; font-weight:normal; padding:0px 0px 0px 0px; text-align:left }\n  .PUX.Subtitle { font-size:16px; font-weight:normal; padding:0px 0px 0px 0px; text-align:left }\n  .PUX.Label    { font-size:14px; font-weight:bold;   padding:4px 0px 0px 0px; text-align:left }\n  .PUX.Textline { font-size:14px; font-weight:normal; padding:4px 0px 0px 0px; text-align:left }\n  .PUX.Hint     { font-size:12px; font-weight:normal; padding:4px 0px 0px 0px; text-align:left }\n  .PUX.Text     { font-size:14px; font-weight:normal; padding:2px 0px 0px 0px; text-align:justify }\n\n  .PUX.HTMLView  {}\n  .PUX.TextView  {}\n  .PUX.ImageView { object-fit:contain; object-position:center center }\n  .PUX.WebView   {}\n\n  .PUX.Icon { width:24px; height:24px }\n\n  .PUX.PseudoDropDown { width:24px; height:24px }\n  .PUX.PseudoDropDown > select {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n\n  .PUX.Button > button, .PUX.Checkbox > input, .PUX.Radiobutton > input,\n  .PUX.Gauge > meter, .PUX.Progressbar > progress, .PUX.Slider > input,\n  .PUX.TextlineInput > input, .PUX.PasswordInput > input,\n  .PUX.NumberInput > input, .PUX.PhoneNumberInput > input,\n  .PUX.EMailAddressInput > input, .PUX.URLInput > input,\n  .PUX.TimeInput > input, .PUX.DateTimeInput > input, .PUX.DateInput > input,\n  .PUX.WeekInput > input, .PUX.MonthInput > input, .PUX.SearchInput > input,\n  .PUX.ColorInput > input, .PUX.DropDown > select, .PUX.FileInput > input,\n  .PUX.TextInput > textarea {\n    left:0px; top:0px; width:100%; height:100%;\n    margin:0px; padding:0px;\n    background:transparent; color:inherit;\n  }\n\n  .PUX.TextlineInput > input, .PUX.PasswordInput > input,\n  .PUX.NumberInput > input, .PUX.PhoneNumberInput > input,\n  .PUX.EMailAddressInput > input, .PUX.URLInput > input,\n  .PUX.TimeInput > input, .PUX.DateTimeInput > input, .PUX.DateInput > input,\n  .PUX.WeekInput > input, .PUX.MonthInput > input, .PUX.SearchInput > input,\n  .PUX.ColorInput > input, .PUX.DropDown > select, .PUX.FileInput > input,\n  .PUX.TextInput > textarea {\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff; padding:0px 2px 0px 2px;\n  }\n\n  .PUX.TextlineInput > input:read-only, .PUX.PasswordInput > input:read-only,\n  .PUX.NumberInput > input:read-only, .PUX.PhoneNumberInput > input:read-only,\n  .PUX.EMailAddressInput > input:read-only, .PUX.URLInput > input:read-only,\n  .PUX.TimeInput > input:read-only, .PUX.DateTimeInput > input:read-only,\n  .PUX.DateInput > input:read-only, .PUX.WeekInput > input:read-only,\n  .PUX.MonthInput > input:read-only, .PUX.SearchInput > input:read-only,\n  .PUX.ColorInput > input:read-only, .PUX.DropDown > select:read-only,\n  .PUX.FileInput > input:read-only, .PUX.TextInput > textarea:read-only {\n    background:transparent;\n  }\n\n  .PUX.Button > button {\n    background:white;\n    border:solid 1px black; border-radius:4px;\n    background:transparent; color:inherit;\n  }\n\n  .PUX.FileInput {\n    color:lightgray;\n    border:solid 1px black; border-radius:3px;\n  }\n  .PUX.FileInput > span {\n    display:flex; align-items:center; position:absolute; overflow:hidden;\n    left:0px; top:0px; width:100%; height:100%;\n    padding:0px 2px 0px 2px; text-overflow:ellipsis;\n  }\n\n  .PUX.TextInput > textarea { border:none; background:#e8f0ff; padding:2px }\n  .PUX.TextInput.no-resize > textarea { resize:none }\n\n  .PUX.horizontalSeparator {\n    height:1px; margin:0px; margin-top:7px;\n    border:none; border-top:solid 1px black\n  }\n  .PUX.verticalSeparator {\n    width:1px; margin:0px; margin-left:7px;\n    border:none; border-left:solid 1px black\n  }\n\n  .PUX.FileDropArea {/*\n    display:flex; flex-flow:column nowrap;\n      justify-content:center; align-items:center;*/\n    border:dashed 4px #DDDDDD; border-radius:4px;\n    color:#DDDDDD;\n  }\n\n  .PUX.FileDropArea * { pointer-events:none }\n\n  .PUX.FileDropArea > input[type=\"file\"] {\n    display:block; position:absolute; appearance:none;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n\n  .PUX.Accordion {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    overflow:auto;\n  }\n\n  .PUX.Fold {\n    display:block; position:relative;\n    left:0px; top:0px; width:100%; bottom:auto;\n  }\n\n  .PUX.Fold-Header {\n    display:block; position:relative;\n    width:100%; height:30px; background:#EEEEEE; border:none;\n    border-top:   solid 1px #FFFFFF;\n    border-bottom:solid 1px #AAAAAA;\n  }\n\n  .PUX.Fold-Expander {\n    left:2px; top:2px; width:24px; height:24px;\n  }\n\n  .PUX.Fold-Title {\n    left:30px; top:0px; bottom:0px; right:0px;\n    font-size:14px; font-weight:bold; color:black; line-height:30px;\n  }\n\n  .PUX.Fold-Content {\n    display:block; position:relative;\n    left:0px; top:0px; width:100%; height:auto;\n  }\n  .PUX.Deck {}\n\n  .PUX.Card {\n    left:0px; top:0px; right:0px; bottom:0px; width:auto; height:auto;\n    border:none;\n  }\n  .PUX.TabStrip {\n    display:flex; flex-flow:row nowrap; align-items:stretch;\n  }\n\n  .PUX.Tab {\n    display:block; position:relative;\n    left:0px; top:0px; height:100%; width:auto;\n    border:none; border-width:0px 0px 4px 0px;\n  }\n  .PUX.Tab.active { border-style:solid; border-color:black }\n\n  .PUX.Tab > * { pointer-events:none }\n\n  .PUX.FlatListView {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    overflow:scroll; overflow-x:auto; overflow-y:scroll;\n  }\n\n  .PUX.FlatListView > div {\n    display:block; position:relative; overflow:hidden; flex:0 0 auto;\n    left:0px; top:0px; width:auto; height:22px; line-height:22px;\n    background:none;\n    border:none; border-bottom:solid 1px light-gray;\n    white-space:nowrap; text-overflow:ellipsis;\n    user-select:none;\n  }\n\n  .PUX.FlatListView > div:last-child {\n    border:none; border-bottom:solid 1px transparent;\n  }\n\n  .PUX.FlatListView > div.selected {\n    background:dodgerblue; color:white;\n  }\n\n\n  .PUX.NestedListView {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    overflow:scroll; overflow-x:auto; overflow-y:scroll;\n  }\n\n  .PUX.NestedListView .ItemView {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n      position:relative; overflow:hidden; flex:0 0 auto;\n    left:0px; top:0px; width:auto; height:auto;\n    background:none; border:none;\n    user-select:none;\n  }\n\n  .PUX.NestedListView .ItemLine {\n    display:flex; flex-flow:row nowrap; align-items:stretch;\n      position:relative; flex:0 0 auto;\n    height:22px; line-height:22px;\n    white-space:nowrap; text-overflow:ellipsis;\n  }\n\n  .PUX.NestedListView .ItemIcon {\n    display:inline-block; position:relative;\n    margin:6px 2px 0px 2px; width:10px; height:10px;\n    pointer-events:none;\n  }\n\n  .PUX.NestedListView .ItemExpander {\n    display:inline-block; position:relative;\n    margin-top:4px; width:14px; height:14px;\n    pointer-events:auto;\n  }\n\n  .PUX.NestedListView .ItemLabel {\n    display:inline-block; position:relative; flex:1 0 auto;\n    pointer-events:none;\n  }\n\n  .PUX.NestedListView .ItemLine.selected > .ItemLabel {\n    background:dodgerblue; color:white;\n  }\n\n  .PUX.ModalLayer {\n    display:block; position:absolute;\n    background:rgba(0,0,0,0.3); border:none;\n  }\n\n\n  .PUX.Dialog, .PUX.ResizableDialog {\n    display:block; position:absolute;\n    border:solid 1px #000000; border-radius:4px;\n    background:white; color:black;\n    box-shadow:0px 0px 10px 0px rgba(0,0,0,0.3);\n  }\n\n  .PUX.Dialog > .Titlebar, .PUX.ResizableDialog > .Titlebar {\n    display:block; position:absolute; overflow:hidden;\n    left:0px; top:0px; right:0px; height:30px;\n    background:#EEEEEE; border:none; border-radius:3px 3px 0px 0px;\n    user-select:none;\n  }\n\n  .PUX.Dialog > .Titlebar > .Title, .PUX.ResizableDialog > .Titlebar > .Title {\n    display:block; position:absolute;\n    left:6px; top:3px; right:30px; height:18px;\n    border:none;\n    font-weight:bold; color:black;\n    user-select:none; pointer-events:none;\n  }\n\n  .PUX.Dialog > .Titlebar > .CloseButton, .PUX.ResizableDialog > .Titlebar > .CloseButton {\n    display:block; position:absolute;\n    top:0px; right:0px; width:30px; height:30px;\n    border:none;\n    user-select:none;\n  }\n\n  .PUX.ResizableDialog > .ContentPane {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:9px;\n    border:none;\n  }\n\n  .PUX.ResizableDialog > .leftResizer {\n    display:block; position:absolute;\n    left:0px; bottom:0px; width:30px; height:9px;\n    border:none; border-top:solid 1px black; border-right:solid 1px black;\n    border-radius:0px 0px 0px 3px;\n    cursor:nesw-resize;\n  }\n\n  .PUX.ResizableDialog > .middleResizer {\n    display:block; position:absolute;\n    left:30px; bottom:0px; right:30px; height:9px;\n    border:none; border-top:solid 1px black;\n    border-radius:0px;\n    cursor:ns-resize;\n  }\n\n  .PUX.ResizableDialog > .rightResizer {\n    display:block; position:absolute;\n    bottom:0px; right:0px; width:30px; height:9px;\n    border:none; border-left:solid 1px black; border-top:solid 1px black;\n    border-radius:0px 0px 3px 0px;\n    cursor:nwse-resize;\n  }\n\n\n\n/**** centered ****/\n\n  .centered {\n    display:block; position:relative;\n    width:100%; height:100%; max-height:240px;\n  }\n\n  .centered > * {\n    display:block; position:absolute;\n    left:50%; top:50%;\n    transform:translate(-55%,-50%);\n    white-space:nowrap;\n  }\n\n",document.head.appendChild(wi);const Si=new WeakMap;function Pi(e,t){let i,n=Si.get(e);if(null!=n)return n;function o(){}function l(e){e.stopImmediatePropagation(),e.preventDefault()}let s,r,{onlyFrom:a,neverFrom:d,Threshold:u=0,onDragStarted:p=o,onDragContinued:h=o,onDragFinished:g=o,onDragCancelled:c=o}=t,$="idle";function x(e){l(e),$="busy";let{pageX:t,pageY:i}=e;p(Math.round(t),Math.round(i),Math.round(t-s),Math.round(i-r),e)}function y(e){if(l(e),"idle"!==$){const t="busy"===$;$="idle",e.target.releasePointerCapture(e.pointerId),t&&c(Math.round(s),Math.round(r),0,0,e)}i=void 0}return n=function(e){switch(e.type){case"pointerdown":return function(e){e.isPrimary&&(null!=a&&(a instanceof HTMLElement&&a!==e.target||"string"==typeof a&&!e.target.matches(a))||null!=d&&(d instanceof HTMLElement&&d===e.target||"string"==typeof d&&e.target.matches(d))||(0===e.button?(e.target.setPointerCapture(e.pointerId),i=e.target,"idle"===$&&(({pageX:s,pageY:r}=e),u>0?$="observing":x(e))):y(e)))}(e);case"pointermove":return function(e){if("idle"!==$&&e.target!==i&&(e.target.setPointerCapture(e.pointerId),i=e.target,console.log("ProtoUX: PointerTarget changed")),"observing"===$){let{pageX:t,pageY:i}=e;(s-t)**2+(r-i)**2>=u**2&&x(e)}else"busy"===$&&function(e){l(e);let{pageX:t,pageY:i}=e;h(Math.round(t),Math.round(i),Math.round(t-s),Math.round(i-r),e)}(e)}(e);case"pointerup":return function(e){"busy"===$?function(e){l(e),$="idle";let{pageX:t,pageY:n}=e;g(Math.round(t),Math.round(n),Math.round(t-s),Math.round(n-r),e),i=void 0}(e):y(e)}(e);case"pointercancel":return function(e){y(e)}(e)}},n.abortDragging=y,Si.set(e,n),n}const Vi=new WeakMap;function vi(e,t){let i,n=Vi.get(e);if(null!=n)return n;function o(){}function l(e){e.stopImmediatePropagation(),e.preventDefault()}let s,r,{onlyFrom:a,neverFrom:d,Threshold:u=0,onDragStarted:p=o,onDragContinued:h=o,onDragFinished:g=o,onDragCancelled:c=o,onClicked:$=o,MultiClickTimeSpan:x=300,onMultiClick:y=o}=t,m="idle",f=0,w=0;function b(e){l(e),m="busy";let{pageX:t,pageY:i}=e;p(Math.round(t),Math.round(i),Math.round(t-s),Math.round(i-r),e)}function W(e){if(l(e),"idle"!==m){const t="busy"===m;m="idle",e.target.releasePointerCapture(e.pointerId),t&&c(Math.round(s),Math.round(r),0,0,e)}i=void 0}return n=function(e){switch(e.type){case"pointerdown":return function(e){e.isPrimary&&(null!=a&&(a instanceof HTMLElement&&a!==e.target||"string"==typeof a&&!e.target.matches(a))||null!=d&&(d instanceof HTMLElement&&d===e.target||"string"==typeof d&&e.target.matches(d))||(0===e.button?(e.target.setPointerCapture(e.pointerId),i=e.target,"idle"===m&&(({pageX:s,pageY:r}=e),u>0?m="observing":b(e))):W(e)))}(e);case"pointermove":return function(e){if("idle"!==m&&e.target!==i&&(e.target.setPointerCapture(e.pointerId),i=e.target,console.log("ProtoUX: PointerTarget changed")),"busy"===m)return function(e){l(e);let{pageX:t,pageY:i}=e;h(Math.round(t),Math.round(i),Math.round(t-s),Math.round(i-r),e)}(e);if("observing"===m){let{pageX:t,pageY:i}=e;(s-t)**2+(r-i)**2>=u**2&&b(e)}}(e);case"pointerup":return function(e){if("busy"===m)return function(e){l(e),m="idle";let{pageX:t,pageY:n}=e;g(Math.round(t),Math.round(n),Math.round(t-s),Math.round(n-r),e),i=void 0}(e);if("observing"===m){l(e),m="idle",$(s,r,e);let t=Date.now();t-f<x?(w+=1,w>1&&y(w,s,r,e)):w=1,f=t}}(e);case"pointercancel":return function(e){W(e)}(e)}},n.abortDragging=W,Vi.set(e,n),n}class Ii{constructor(e="PUX"){this._IdPrefix=void 0,this._ImageFolder="",this._ScreenSet={},this._DialogSet={},this._observed=mi({},{deep:!1}),this._UpdaterList=[],this._StartScreen={},this._openScreen={},this._openDialogs=[],this._View=void 0,this._IdPrefix=e}get ImageFolder(){return this._ImageFolder}set ImageFolder(e){""===(e=e.trim())||e.endsWith("/")||(e+="/"),this._ImageFolder=e}get Style(){const e=document.getElementById(this._IdPrefix+"-Style");return null==e?"":e.innerHTML}set Style(e){const t=this._IdPrefix+"-Style";let i=this._ImageFolder;""!==i&&(e=e.replace(/url\("\/images\//g,'url("'+i));let n=document.getElementById(t);null==n&&(n=document.createElement("style"),n.setAttribute("id",t),document.head.appendChild(n)),n.innerHTML=e}get ScreenSet(){return this._ScreenSet}set ScreenSet(e){this._ScreenSet=e;for(let t in e){this._StartScreen=e[t];break}for(let t in e)Object.assign(e[t],{dX:0,dY:0,dW:0,dH:0})}get observed(){return this._observed}set observed(e){Wi("observed")}ScreenNamed(e){return this._ScreenSet[e]}existingScreenNamed(t){const i=this._ScreenSet[t];return null==i&&bi("NoSuchScreen: a screen named "+e(t)+" does not exist"),i}packScreen(e,t=10,i){null==i&&(i=t);const n=this.existingScreenNamed(e);if(null==n.packedGeometry)return;let{x:o,y:l,Width:s,Height:r}=n.packedGeometry;o-=t,s+=2*t,l-=i,r+=2*i,n.Width=s,n.Height=r,n.WidgetList.forEach(e=>{e.hidden||(e.x-=o,e.y-=l)})}openScreen(e){const t=this.existingScreenNamed(e);this._openScreen!==t&&(this._openScreen=t,this.rerender())}closeScreen(e){const t=this.ScreenNamed(e);null!=t&&this._openScreen===t&&(this._openScreen=this._StartScreen,this.rerender())}ScreenIsOpen(e){const t=this.existingScreenNamed(e);return this._openScreen===t}startWithScreen(e){this._StartScreen=this.existingScreenNamed(e),this.openScreen(e)}get StartScreen(){return this._StartScreen}set StartScreen(e){Wi("StartScreen")}extractAllDialogs(){for(let e in this._ScreenSet){const i=this._ScreenSet[e].WidgetList;for(let n=i.length-1;n>=0;n--){const o=i[n];if("Dialog"===o.Type||"ResizableDialog"===o.Type){if(!t(o.Name)){console.error('Dialog without name in screen "'+e+'"');continue}if(o.Name in this._DialogSet){console.error('a dialog with name "'+o.Name+'" has already been registered');continue}this._DialogSet[o.Name]=o,i.splice(n,1)}}}}DialogNamed(e){return this._DialogSet[e]}existingDialogNamed(t){const i=this._DialogSet[t];return null==i&&bi("NoSuchDialog: a dialog named "+e(t)+" does not exist"),i}openDialog(e){const t=this.existingDialogNamed(e),i=this._openDialogs.indexOf(t);if(i>=0){if(i===this._openDialogs.length-1)return;this._openDialogs.splice(i,1)}this._openDialogs.push(t),this.rerender(),"function"==typeof t.onOpen&&t.onOpen(t)}closeDialog(e){let t=this.DialogNamed(e);if(null==t)return;const i=this._openDialogs.indexOf(t);i<0||(this._openDialogs.splice(i,1),this.rerender(),"function"==typeof t.onClose&&t.onClose(t))}DialogIsOpen(e){let t=this.existingDialogNamed(e);return this._openDialogs.indexOf(t)>=0}get openDialogs(){return this._openDialogs.slice()}set openDialogs(e){Wi("openDialogs")}closeAllDialogs(){this._openDialogs.length=0,this.rerender()}DialogIsFrontMost(e){let t=this.existingDialogNamed(e);return this._openDialogs.indexOf(t)===this._openDialogs.length-1}bringDialogToFront(e){this.openDialog(e)}WidgetNamed(e){const t=this._ScreenSet;for(let i in t){const n=t[i].WidgetList;for(let t=0,i=n.length;t<i;t++)if(n[t].Name===e)return n[t]}}existingWidgetNamed(t){const i=this.WidgetNamed(t);return null==i&&bi("NoSuchWidget: a widget named "+e(t)+" does not exist"),i}WidgetOnScreen(e,t){const i=t.WidgetList||[];for(let t=0,n=i.length;t<n;t++)if(i[t].Name===e)return i[t]}WidgetOnDialog(e,t){return this.WidgetOnScreen(e,t)}existingWidgetOnScreen(t,i){const n=this.WidgetOnScreen(t,i);return null==n&&bi("NoSuchWidget: screen "+e(i.Name)+" does not contain a widget named "+e(t)),n}existingWidgetOnDialog(t,i){const n=this.WidgetOnDialog(t,i);return null==n&&bi("NoSuchWidget: dialog "+e(i.Name)+" does not contain a widget named "+e(t)),n}WidgetInContainer(e,t){const i=t.WidgetList||[];for(let t=0,n=i.length;t<n;t++)if(i[t].Name===e)return i[t]}existingWidgetInContainer(t,i){const n=this.WidgetInContainer(t,i);return null==n&&bi("NoSuchWidget: could not find widget named "+e(t)),n}stuff(t){for(let i in t){const n=this.ScreenNamed(i);if(null!=n){this.stuffScreen(n,t[i]);continue}const o=this.DialogNamed(i);null==o?bi("NoSuchScreenOrDialog: no screen or dialog named "+e(i)+" found"):this.stuffDialog(o,t[i])}}stuffScreen(e,t){for(let i in t){let n=this.existingWidgetOnScreen(i,e);this.stuffWidget(n,t[i])}}stuffDialog(e,t){for(let i in t){let n=this.existingWidgetOnDialog(i,e);this.stuffWidget(n,t[i])}}stuffWidget(e,t){if(this.ValueIsStuff(t)){const i=this.existingScreenNamed(t.from);e.WidgetList=(e.WidgetList||[]).concat(t.with.map(e=>this.existingWidgetOnScreen(e,i)))}else for(let i in t){const n=this.existingWidgetInContainer(i,e);this.stuffWidget(n,t[i])}}ValueIsStuff(e){return i(e)&&n(e.from)&&o(e.with,n)}configure(t){for(let i in t){const n=this.ScreenNamed(i);if(null!=n){this.configureScreen(n,t[i]);continue}const o=this.DialogNamed(i);null==o?bi("NoSuchScreenOrDialog: no screen or dialog named "+e(i)+" found"):this.configureDialog(o,t[i])}}configureScreen(e,t){for(let i in t)if("self"===i)this.configureWidget(e,t.self);else{const n=this.existingWidgetOnScreen(i,e);this.configureWidget(n,t[i])}}configureDialog(e,t){for(let i in t)if("self"===i)this.configureWidget(e,t.self);else{const n=this.existingWidgetOnDialog(i,e);this.configureWidget(n,t[i])}}configureWidget(e,t){for(let n in t){let o=t[n];if(i(o)&&l(o.Updater))this._UpdaterList.push(fi(()=>{this.updateWidget(e,{[n]:o.Updater()})}));else{if(i(o)&&null!=e.WidgetList){const t=this.WidgetInContainer(n,e);if(null!=t){this.configureWidget(t,o);continue}}e[n]=o}}}update(t){for(let i in t){const n=this.ScreenNamed(i);if(null!=n){this.updateScreen(n,t[i]);continue}const o=this.DialogNamed(i);null==o?bi("NoSuchScreenOrDialog: no screen or dialog named "+e(i)+" found"):this.updateDialog(o,t[i])}}updateScreen(e,t){for(let i in t)if("self"===i)this.updateWidget(e,t.self);else{const n=this.existingWidgetOnScreen(i,e);this.updateWidget(n,t[i])}}updateDialog(e,t){for(let i in t)if("self"===i)this.updateWidget(e,t.self);else{const n=this.existingWidgetOnDialog(i,e);this.updateWidget(n,t[i])}}updateWidget(e,t){for(let i in t)e[i]=t[i];const i=e.View;null!=i&&i.rerender()}updatedFrom(e){return{Updater:e}}get View(){return this._View}set View(e){Wi("View")}renderInto(e){$(x(pe||(pe=yi`<${0} ProtoUX=${0}/>`),Ui,this),e)}rerender(){null!=this._View&&this._View.rerender()}static registerWidgetView(e,t){Ii._WidgetViewRegistry[e]=t}static WidgetViewForType(e){return Ii._WidgetViewRegistry[e]}}Ii._WidgetViewRegistry=Object.create(null);class Ui extends y{constructor(...e){super(...e),this.state={Value:0}}rerender(){this.setState({Value:this.state.Value+1})}render(e){let t=e.ProtoUX;t._View=this;const i=t._openScreen,n=t._openDialogs.slice(),o=n.pop(),l=1==(null==o?void 0:o.isModal);return x(he||(he=yi`<div style="
        display:block; position:absolute;
        left:0px; top:0px; right:0px; bottom:0px;
      ">
        <${0} ProtoUX=${0} Screen=${0}/>
        ${0}
        ${0}
        ${0}
      </div>`),Xi,t,i,n.map(e=>x(ge||(ge=yi`<${0} ProtoUX=${0} Dialog=${0} key=${0}/>`),Ti,t,e,e.Name)),l?x(ce||(ce=yi`<${0}/>`),Di):"",null==o?"":x($e||($e=yi`<${0} ProtoUX=${0} Dialog=${0} key=${0}/>`),Ti,t,o,o.Name))}}class Xi extends y{render(e){const t=e.Screen;t.View=this;const{Id:i,Classes:n,Style:o,Width:l,Height:s,WidgetList:r}=t;return x(xe||(xe=yi`<div class=${0} id=${0} style="
        width:${0}px; height:${0}px; ${0}
      ">
        ${0}
      </div>`),Mi("PUX Screen",n),i,l,s,o||"",r.map(t=>x(ye||(ye=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),_i,t,e.ProtoUX,t.Name)))}}class Di extends y{render(e){const{Style:t}=e;return x(me||(me=yi`<div class="PUX ModalLayer" style="
        ${0};
        display:block; position:absolute;
        left:0px; top:0px; right:0px; bottom:0px;
      " onClick=${0}/>`),t||"",function(e){e.stopImmediatePropagation(),e.preventDefault()})}}class Ti extends y{render(e){const t=e.Dialog;return"ResizableDialog"===t.Type?x(fe||(fe=yi`<${0} Dialog=${0} ProtoUX=${0}/>`),ki,t,e.ProtoUX):x(we||(we=yi`<${0}  Dialog=${0} ProtoUX=${0}/>`),Ci,t,e.ProtoUX)}}class Ci extends y{constructor(...e){super(...e),this.state={Value:0}}rerender(){this.setState({Value:this.state.Value+1})}render(e){const t=e.Dialog;t.View=this;const i=(i,n,o,l)=>{t.x=t._DragOffset.x+o,t.y=t._DragOffset.y+l,t.z=20001e3,e.ProtoUX.View.rerender()},n=(n,o,l,s)=>{i(0,0,l,s),t.z=2e6,e.ProtoUX.bringDialogToFront(t.Name)},o=Pi(t,{neverFrom:".CloseButton",Threshold:4,onDragStarted:(e,n,o,l)=>{t._DragOffset={x:t.x,y:t.y},i(0,0,o,l)},onDragContinued:i,onDragFinished:n,onDragCancelled:n}),{Id:l,Classes:s,Style:r,x:a,y:d,z:u,Width:p,Height:h,Title:g,closeable:c,WidgetList:$}=t,y=f(t,w),m=`left:${a}px; top:${d}px; width:${p}px; height:${h}px; right:auto; bottom:auto;`;return x(be||(be=yi`<div class=${0} id=${0} style="
        ${0}; ${0}; z-index:${0};
      " ...${0}>
        <div class="Titlebar"
          onPointerDown=${0} onPointerUp=${0}
          onPointerMove=${0} onPointerCancel=${0}
        >
          <div class="Title">${0}</div>
          <img class="CloseButton" src="${0}/xmark.png"
            style="visibility:${0}"
            onClick=${0}/>
        </div>

        ${0}
      </>`),Mi("PUX Dialog",s),l,r||"",m,u||2e6,y,o,o,o,o,g,e.ProtoUX._ImageFolder,!1===c?"hidden":"visible",function(i){i.stopImmediatePropagation(),i.preventDefault(),!1!==c&&e.ProtoUX.closeDialog(t.Name)},($||[]).map(t=>x(We||(We=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),_i,t,e.ProtoUX,t.Name)))}}class ki extends y{constructor(...e){super(...e),this.state={Value:0}}rerender(){this.setState({Value:this.state.Value+1})}render(e){const t=e.Dialog;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:r,z:a,Width:d,Height:u,Title:p,closeable:h,minWidth:g,minHeight:c,maxWidth:$,maxHeight:y,WidgetList:m}=t,w=f(t,b);s("minimal width",g),s("maximal width",$),s("minimal height",c),s("maximal height",y),null==g&&(g=120),null==$&&($=Infinity),null==c&&(c=80),null==y&&(y=Infinity),g=Math.max(0,g),$=Math.max(g,$),c=Math.max(0,c),y=Math.max(c,y);const W=(i,n,o,l)=>{"drag"===t._DragMode?P(o,l):V(o,l),t.z=20001e3,e.ProtoUX.View.rerender()},S=(i,n,o,l)=>{W(0,0,o,l),t.z=2e6,e.ProtoUX.bringDialogToFront(t.Name)},P=(e,i)=>{t.x=t._DragOffset.x+e,t.y=t._DragOffset.y+i},V=(e,i)=>{switch(t._DragMode){case"resize-sw":let i=Math.max(g,Math.min(t._DragOffset.Width-e,$));t.x=t._DragOffset.x-(e=i-t._DragOffset.Width),t.Width=t._DragOffset.Width+e;break;case"resize-se":t.Width=Math.max(g,Math.min(t._DragOffset.Width+e,$))}t.Height=Math.max(c,Math.min(t._DragOffset.Height+i,y))},v=Pi(t,{onlyFrom:".Titlebar,.leftResizer,.middleResizer,.rightResizer",neverFrom:".CloseButton",Threshold:4,onDragStarted:(e,i,n,o,l)=>{let s=l.target.classList;switch(t._DragMode=void 0,!0){case s.contains("leftResizer"):t._DragMode="resize-sw";break;case s.contains("middleResizer"):t._DragMode="resize-s";break;case s.contains("rightResizer"):t._DragMode="resize-se";break;default:t._DragMode="drag"}t._DragOffset={x:t.x,Width:t.Width,y:t.y,Height:t.Height},W(0,0,n,o)},onDragContinued:W,onDragFinished:S,onDragCancelled:S}),I=`left:${l}px; top:${r}px; width:${d}px; height:${u}px; right:auto; bottom:auto;`;return x(Se||(Se=yi`<div class=${0} id=${0} style="
        ${0}; ${0}; z-index:${0};
      " ...${0}>
        <div class="ContentPane">
          ${0}
        </div>

        <div class="Titlebar"
          onPointerDown=${0} onPointerUp=${0}
          onPointerMove=${0} onPointerCancel=${0}
        >
          <div class="Title">${0}</div>
          <img class="CloseButton" src="${0}/xmark.png"
            style="visibility:${0}"
            onClick=${0}/>
        </div>

        <div class="leftResizer"
          onPointerDown=${0} onPointerUp=${0}
          onPointerMove=${0} onPointerCancel=${0}
        />
        <div class="middleResizer"
          onPointerDown=${0} onPointerUp=${0}
          onPointerMove=${0} onPointerCancel=${0}
        />
        <div class="rightResizer"
          onPointerDown=${0} onPointerUp=${0}
          onPointerMove=${0} onPointerCancel=${0}
        />
      </>`),Mi("PUX ResizableDialog",n),i,o||"",I,a||2e6,w,(m||[]).map(t=>x(Pe||(Pe=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),_i,t,e.ProtoUX,t.Name)),v,v,v,v,p,e.ProtoUX._ImageFolder,!1===h?"hidden":"visible",function(i){i.stopImmediatePropagation(),i.preventDefault(),!1!==h&&e.ProtoUX.closeDialog(t.Name)},v,v,v,v,v,v,v,v,v,v,v,v)}}class _i extends y{constructor(...e){super(...e),this.state={Value:0}}rerender(){this.setState({Value:this.state.Value+1})}render(e){const t=e.Widget;if(t.View=this,1==e.hidden||1==t.hidden)return"";const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,WidgetList:d}=t,u=f(t,W),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";switch(t.Type){case"Group":return x(Ve||(Ve=yi`<div class="PUX Widget ${0}" id=${0} style="${0} ${0}" ...${0}>
            ${0}
          </div>`),n,i,p,o||"",u,(d||[]).map(t=>x(ve||(ve=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),_i,t,e.ProtoUX,t.Name)));case"Box":return x(Ie||(Ie=yi`<div class="PUX Widget ${0}" id=${0} style="
            ${0} ${0}
          " ...${0} key=${0}/>`),n,i,p,o||"",u,t.Name);default:const l=Ii.WidgetViewForType(t.Type);if(null==l){const{Id:i,Classes:n,Style:o,Value:l,WidgetList:s}=t,r=f(t,S);return x(Ue||(Ue=yi`<div class="PUX Widget ${0}" id=${0} style="
              ${0} ${0}
            " ...${0}>
              ${0}
              ${0}
            </div>`),n,i,p,o||"",r,l||"",(s||[]).map(t=>x(Xe||(Xe=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),_i,t,e.ProtoUX,t.Name)))}return x(De||(De=yi`<${0} Widget=${0} ProtoUX=${0} key=${0}/>`),l,t,e.ProtoUX,t.Name)}}}Ii.registerWidgetView("horizontalSeparator",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a}=t,d=f(t,P),u=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Te||(Te=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}/>`),Mi("PUX horizontalSeparator Widget",n),i,u,o||"",d)}}),Ii.registerWidgetView("verticalSeparator",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a}=t,d=f(t,V),u=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Ce||(Ce=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}/>`),Mi("PUX verticalSeparator Widget",n),i,u,o||"",d)}}),Ii.registerWidgetView("Badge",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,v);const p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";switch(d=(""+(d||"")).trim(),!0){case""===d:return"";case d.length>1:d="#";default:return x(ke||(ke=yi`<div class=${0} id=${0} style="
          ${0} ${0}
        " ...${0}>${0}</div>`),Mi("PUX Badge Widget",n),i,p,o||"",u,d)}}}),Ii.registerWidgetView("HTMLView",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,I),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(_e||(_e=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}
        dangerouslySetInnerHTML=${0}
      />`),Mi("PUX HTMLView Widget",n),i,p,o||"",u,{__html:d})}}),Ii.registerWidgetView("TextView",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,U),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(He||(He=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>${0}</>`),Mi("PUX TextView Widget",n),i,p,o||"",u,d)}}),Ii.registerWidgetView("ImageView",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,ImageScaling:u,ImageAlignment:p}=t,h=f(t,X),g=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Ae||(Ae=yi`<img class=${0} id=${0} style="
        ${0} ${0};
        object-fit:${0};
        object-position:${0};
      " ...${0} src=${0}/>`),Mi("PUX ImageView Widget",n),i,g,o||"","stretch"===u?"fill ":u,p,h,d)}}),Ii.registerWidgetView("WebView",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,PermissionsPolicy:u,allowsFullscreen:p,SandboxPermissions:h,ReferrerPolicy:g}=t,c=f(t,D),$=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Le||(Le=yi`<iframe class=${0} id=${0} style="
        ${0} ${0}
      " ...${0} src=${0}
        allow=${0} allowfullscreen=${0}
        sandbox=${0}
        referrerpolicy=${0}
      />`),Mi("PUX WebView Widget",n),i,$,o||"",c,d,u,p,h||"allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-same-origin allow-scripts",g)}}),Ii.registerWidgetView("Icon",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Color:u,disabled:p,onClick:h}=t,g=f(t,T);const c=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let $=e.ProtoUX.ImageFolder;return null!=d&&""!==d.trim()&&(d=d.trim().replace(/url\("\/images\//g,'url("'+$)),x(Me||(Me=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " disabled=${0}><div style="
        display:block; position:absolute;
        left:0px; top:0px; width:100%; height:100%;
        -webkit-mask-image:${0};         mask-image:${0};
        -webkit-mask-size:contain;           mask-size:contain;
        -webkit-mask-position:center center; mask-position:center center;
        background-color:${0};
      " onClick=${0} ...${0}/></>`),Mi("PUX Icon Widget",n),i,c,o||"",p,d,d,u||"black",function(e){1==p?(e.stopPropagation(),e.preventDefault()):"function"==typeof h&&h(e)},g)}}),Ii.registerWidgetView("PseudoDropDown",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:l,Style:s,x:r,y:a,Width:d,Height:u,Value:p,Color:h,Options:g,disabled:c,onInput:$}=t,y=f(t,C);const m=null!=r&&null!=d&&null!=a&&null!=u?`left:${r}px; top:${a}px; width:${d}px; height:${u}px; right:auto; bottom:auto;`:"";let w=e.ProtoUX.ImageFolder;return null!=p&&""!==p.trim()&&(p=p.trim().replace(/url\("\/images\//g,'url("'+w)),x(Ne||(Ne=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      "><div style="
        display:block; position:absolute;
        left:0px; top:0px; width:100%; height:100%;
        -webkit-mask-image:${0};         mask-image:${0};
        -webkit-mask-size:contain;           mask-size:contain;
        -webkit-mask-position:center center; mask-position:center center;
        background-color:${0};
      " ...${0}/>
        <select onInput=${0}>
          ${0}
        </select>
      </div>`),Mi("PUX PseudoDropDown Widget",l),i,m,s||"",p,p,h||"black",y,function(e){1==c?(e.stopPropagation(),e.preventDefault()):"function"==typeof $&&$(e)},o(g,n)?x(Fe||(Fe=yi`
                <option value="" disabled selected>please select</option>
                ${0}
              `),(g||[]).map(e=>x(Ee||(Ee=yi`<option>${0}</>`),e))):g)}}),Ii.registerWidgetView("Button",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,k),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(ze||(ze=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <button ...${0}>${0}</button>
      </div>`),Mi("PUX Button Widget",n),i,p,o||"",u,d||"")}}),Ii.registerWidgetView("Checkbox",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,_),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let{checked:h,indeterminate:g}=e;return null==h&&(h=1==d),null==g&&(g=null==d),x(Oe||(Oe=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <input type="checkbox" checked=${0} indeterminate=${0} ...${0}/>
      </div>`),Mi("PUX Checkbox Widget",n),i,p,o||"",h,g,u)}}),Ii.registerWidgetView("Radiobutton",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,H),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let{checked:h}=e;return null==h&&(h=1==d),x(Re||(Re=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <input type="radio" checked=${0} ...${0}/>
      </div>`),Mi("PUX Radiobutton Widget",n),i,p,o||"",h,u)}}),Ii.registerWidgetView("Gauge",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,A),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Be||(Be=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <meter value=${0} ...${0}/>
      </div>`),Mi("PUX Gauge Widget",n),i,p,o||"",d||"",u)}}),Ii.registerWidgetView("Progressbar",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,L),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(je||(je=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <progress value=${0} ...${0}/>
      </div>`),Mi("PUX Progressbar Widget",n),i,p,o||"",d||"",u)}}),Ii.registerWidgetView("Slider",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Hashmarks:u}=t,p=f(t,M);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Hashmarks",c=x(Ye||(Ye=yi`\n<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>{const t=e.replace(/:.*$/,"").trim(),i=e.replace(/^[^:]+:/,"").trim();return x(Ge||(Ge=yi`<option label=${0} value=${0}></option>`),t,i)}))),x(Ke||(Ke=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <input type="range" value=${0} ...${0}
          onBlur=${0} list=${0}
        />
      </div>${0}`),Mi("PUX Slider Widget",n),i,h,o||"",d||"",p,this.rerender.bind(this),g,c)}}),Ii.registerWidgetView("TextlineInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,N);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(Ze||(Ze=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(qe||(qe=yi`<option value=${0}></option>`),e)))),x(Je||(Je=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="text" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX TextlineInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("PasswordInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,F);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Qe||(Qe=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <input type="password" value=${0} ...${0}
          onBlur=${0}
        />
      </div>`),Mi("PUX PasswordInput Widget",n),i,p,o||"",d||"",u,this.rerender.bind(this))}}),Ii.registerWidgetView("NumberInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,E);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(et||(et=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(tt||(tt=yi`<option value=${0}></option>`),e)))),x(it||(it=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="number" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX NumberInput Widget",n),i,h,o||"",g,null==d?"":d,p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("PhoneNumberInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,z);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(nt||(nt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(ot||(ot=yi`<option value=${0}></option>`),e)))),x(lt||(lt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="tel" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX PhoneNumberInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("EMailAddressInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,O);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(st||(st=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(rt||(rt=yi`<option value=${0}></option>`),e)))),x(at||(at=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="email" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX EMailAddressInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("URLInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,R);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(dt||(dt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(ut||(ut=yi`<option value=${0}></option>`),e)))),x(pt||(pt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="url" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX URLInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("TimeInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,B);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(ht||(ht=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(gt||(gt=yi`<option value=${0}></option>`),e)))),x(ct||(ct=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="time" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX TimeInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("DateTimeInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,j);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x($t||($t=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(xt||(xt=yi`<option value=${0}></option>`),e)))),x(yt||(yt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="datetime-local" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX DateTimeInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("DateInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,Y);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(mt||(mt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(ft||(ft=yi`<option value=${0}></option>`),e)))),x(wt||(wt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="date" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX DateInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("WeekInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,G);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(bt||(bt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(Wt||(Wt=yi`<option value=${0}></option>`),e)))),x(St||(St=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="week" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX WeekInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("MonthInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,K);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(Pt||(Pt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(Vt||(Vt=yi`<option value=${0}></option>`),e)))),x(vt||(vt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="month" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX MonthInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("SearchInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,Z);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(It||(It=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(Ut||(Ut=yi`<option value=${0}></option>`),e)))),x(Xt||(Xt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="search" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX SearchInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("FileInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Placeholder:u,onDrop:p}=t,h=f(t,q);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const g=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Dt||(Dt=yi`<label class=${0} id=${0} style="
        ${0} ${0}
      " onDragEnter=${0} onDragOver=${0} onDrop=${0}>
        <input type="file" style="display:none" ...${0}
          onBlur=${0}
        />
        ${0}
        ${0}
      </label>`),Mi("PUX FileInput Widget",n),i,g,o||"",function(e){e.stopPropagation(),e.preventDefault()},function(e){e.stopPropagation(),e.preventDefault()},function(e){e.stopPropagation(),e.preventDefault(),"function"==typeof p&&p(e)},h,this.rerender.bind(this),""===(d||"")?"":x(Tt||(Tt=yi`<span>${0}</span>`),d),""===(d||"")?""===(u||"")?"":x(Ct||(Ct=yi`<span>${0}</span>`),u):"")}}),Ii.registerWidgetView("ColorInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Suggestions:u}=t,p=f(t,J);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";let g,c="";return Array.isArray(u)&&u.length>0&&(g=i+"-Suggestions",c=x(kt||(kt=yi`<datalist id=${0}>
          ${0}
        </datalist>`),g,u.map(e=>x(_t||(_t=yi`<option value=${0}></option>`),e)))),x(Ht||(Ht=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " list=${0}>
        <input type="color" value=${0} ...${0}
          onBlur=${0}
        />
      </div>${0}`),Mi("PUX ColorInput Widget",n),i,h,o||"",g,d||"",p,this.rerender.bind(this),c)}}),Ii.registerWidgetView("DropDown",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,Options:u,Placeholder:p}=t,h=f(t,Q);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const g=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(At||(At=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <select ...${0} onBlur=${0}>
          ${0}
          ${0}
        </select>
      </div>`),Mi("PUX DropDown Widget",n),i,g,o||"",h,this.rerender.bind(this),null==p?"":x(Lt||(Lt=yi`<option value="" disabled>${0}</option>`),p),(u||[]).map(e=>x(Mt||(Mt=yi`<option selected=${0}>${0}</>`),e===d,e)))}}),Ii.registerWidgetView("TextInput",class extends _i{constructor(...e){super(...e),this._ValueToShow=void 0}render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d}=t,u=f(t,ee);document.activeElement===this.base?d=this._ValueToShow:this._ValueToShow=d;const p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Nt||(Nt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        <textarea ...${0} value=${0}
          onBlur=${0}
        ></textarea>
      </div>`),Mi("PUX TextInput Widget",n),i,p,o||"",u,d||"",this.rerender.bind(this))}}),Ii.registerWidgetView("FileDropArea",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,onDrop:d,WidgetList:u}=t,p=f(t,te),h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(Ft||(Ft=yi`<label class=${0} id=${0} style="
        ${0} ${0}
      " onDragEnter=${0} onDragOver=${0} onDrop=${0}>
        <input type="file" ...${0}/>
        ${0}
      </label>`),Mi("PUX FileDropArea Widget",n),i,h,o||"",function(e){e.stopPropagation(),e.preventDefault()},function(e){e.stopPropagation(),e.preventDefault()},function(e){e.stopPropagation(),e.preventDefault(),"function"==typeof d&&d(e)},p,(u||[]).map(t=>x(Et||(Et=yi`<${0} Widget=${0} ProtoUX=${0}/>`),_i,t,e.ProtoUX)))}}),Ii.registerWidgetView("Accordion",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,WidgetList:d}=t,u=f(t,ie),p=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"";return x(zt||(zt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>
        ${0}
      </>`),Mi("PUX Accordion Widget",n),i,p,o||"",u,(d||[]).map(t=>x(Ot||(Ot=yi`<${0} Widget=${0} ProtoUX=${0}/>`),Hi,t,e.ProtoUX)))}});class Hi extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,Height:l,Value:s,Expansion:r,WidgetList:a}=t,d=f(t,ne),u=this;return x(Rt||(Rt=yi`<div class=${0} id=${0} style="
        ${0}; left:0px; top:0px; width:100%; height:auto;
      " ...${0}>
        <div class="PUX Fold-Header">
          <img class="PUX Fold-Expander" src=${0} onClick=${0}
          />
          <div class="PUX Fold-Title">${0}</>
        </div>

        ${0}
      </>`),Mi("PUX Fold Widget",n),i,o||"",d,r?`${e.ProtoUX._ImageFolder}caret-down.png`:`${e.ProtoUX._ImageFolder}caret-right.png`,function(){t.Expansion=!t.Expansion,u.rerender()},s,r?x(Bt||(Bt=yi`<div class="PUX Fold-Content" style="
              height:${0}px; border:none;
            ">
              ${0}
            </>`),l,(a||[]).map(t=>x(jt||(jt=yi`<${0} Widget=${0} ProtoUX=${0}/>`),_i,t,e.ProtoUX))):"")}}Ii.registerWidgetView("Fold",Hi),Ii.registerWidgetView("Deck",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,WidgetList:u}=t,p=f(t,oe),h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"",g=(u||[])[null==d?0:d<0?u.length+d:d]||(u||[])[0];return x(Yt||(Yt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>
        ${0}
      </>`),Mi("PUX Deck Widget",n),i,h,o||"",p,null==g?x(Gt||(Gt=yi`<${0}><span>(no card)</span></>`),Ni):x(Kt||(Kt=yi`<${0} Widget=${0} ProtoUX=${0}/>`),Ai,g,e.ProtoUX))}});class Ai extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,WidgetList:l}=t,s=f(t,le);return x(Zt||(Zt=yi`<div class=${0} id=${0} style="
        border:none; ${0};
        left:0px; top:0px; right:0px; bottom:0px; width:auto; height:auto
      " ...${0}>
        ${0}
      </>`),Mi("PUX Card Widget",n),i,o||"",s,(l||[]).map(t=>x(qt||(qt=yi`<${0} Widget=${0} ProtoUX=${0}/>`),_i,t,e.ProtoUX)))}}Ii.registerWidgetView("Card",Ai),Ii.registerWidgetView("TabStrip",class extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:a,Value:d,WidgetList:u}=t,p=f(t,se),h=null!=l&&null!=r&&null!=s&&null!=a?`left:${l}px; top:${s}px; width:${r}px; height:${a}px; right:auto; bottom:auto;`:"",g=(u||[])[null==d?0:d<0?u.length+d:d]||(u||[])[0],c=this;return x(Jt||(Jt=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>
        ${0}
      </>`),Mi("PUX TabStrip Widget",n),i,h,o||"",p,(u||[]).map((t,i)=>x(Qt||(Qt=yi`
          <${0} Widget=${0} ProtoUX=${0}
            active=${0}
            onClick=${0}
          />
        `),Li,t,e.ProtoUX,t===g,()=>function(e){c.base.dispatchEvent(new CustomEvent("ValueChange",{detail:e}))}(i))))}});class Li extends _i{render(e){const t=e.Widget;t.View=this;const{Id:i,Classes:n,Style:o,Width:l,WidgetList:s}=t,r=f(t,re),{active:a,onClick:d}=e;return x(ei||(ei=yi`<div class=${0} id=${0} style="
        ${0}; width:${0}px; border:none; border-width:0px 0px 4px 0px;
        border-style:solid; border-bottom-color:${0}
      " ...${0} onClick=${0}>
        ${0}
      </div>`),Mi('PUX ${active ? "active" : ""} Tab Widget',n),i,o||"",l,a?"black":"transparent",r,d,(s||[]).map(t=>x(ti||(ti=yi`<${0} Widget=${0} ProtoUX=${0}/>`),_i,t,e.ProtoUX)))}}function Mi(e,t){const i=Object.create(null);return(e+" "+(t||"")).trim().replace(/\s+/g," ").split(" ").filter(e=>!(e in i)&&(i[e]=!0,!0)).join(" ")}Ii.registerWidgetView("Tab",Li),Ii.registerWidgetView("FlatListView",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:h,Width:g,Height:c,List:$,ItemRenderer:y,Placeholder:m,selectedIndices:w,SelectionLimit:b,onSelectionChange:W,onItemSelected:S,onItemDeselected:P}=t,V=f(t,ae);const v=null!=l&&null!=g&&null!=h&&null!=c?`left:${l}px; top:${h}px; width:${g}px; height:${c}px; right:auto; bottom:auto;`:"";r("item list",$),a("list item renderer",y),d("list placeholder",m),u("list of selected indices",w,p),s("selection limit",b),a("selection change callback",W),a("item selection callback",S),a("item deselection callback",P),null==y&&(y=e=>x(ii||(ii=yi`${0}`),e+"")),null==m&&(m="(empty)"),null==w&&(w=[]),null==b&&(b=1);const I=Object.create(null);if(w=w.filter(e=>!(!(p(e)&&e>=0&&e<$.length)||e in I||(I[e]=!0,0))),w.length>b){const e=w.slice(b);w.length=b,null!=W&&W(w),null!=P&&e.forEach(e=>{P($[e],e)})}function U(e){return e in I}return x(ni||(ni=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>
        ${0}
      </>`),Mi("PUX FlatListView Widget",n),i,v,o||"",V,0===$.length?x(oi||(oi=yi`<div class="centered"><span>${0}</></>`),m):$.map((e,t)=>x(li||(li=yi`<div
              class=${0}
              dangerouslySetInnerHTML=${0}
              onClick=${0}
            />`),U(t)?"selected":void 0,{__html:y(e,t,U(t))},e=>function(e,t){if(e.stopImmediatePropagation(),e.preventDefault(),0===b)return;let i,n,o=!1;e.shiftKey||e.metaKey?(o=!0,U(t)?(n=[t],w=w.filter(e=>e!==t)):(w.length===b&&(n=[w.shift()]),i=[t],w.push(t))):(n=w.filter(e=>e!==t),o=!U(t),i=o?[t]:[],w=[t]),o&&null!=W&&W(w),null!=n&&null!=P&&n.forEach(e=>{P($[e],e)}),null!=i&&null!=S&&i.forEach(e=>{S($[e],e)})}(e,t))))}}),Ii.registerWidgetView("NestedListView",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:l,x:$,y,Width:m,Height:w,List:b,ItemRenderer:W,Placeholder:S,LabelOfItem:P,ContentListOfItem:V,selectedPaths:v,SelectionLimit:I,SelectionMode:U,onSelectionChange:X,onItemSelected:D,onItemDeselected:T,onItemDoubleClicked:C,expandedPaths:k,Indentation:_,onExpansionChange:H,onItemExpanded:A,onItemCollapsed:L}=t,M=f(t,de);const N=null!=$&&null!=m&&null!=y&&null!=w?`left:${$}px; top:${y}px; width:${m}px; height:${w}px; right:auto; bottom:auto;`:"";function F(e){return o(e,p)}function E(e){let t=b[e[0]];for(let i=1,n=e.length;i<n;i++){if(null==t)return;const n=V(t);if(!c(n))return;t=n[e[i]]}return t}function z(e){return null!=E(e)}function O(e,t){return e.length===t.length&&e.every((e,i)=>e===t[i])}function R(e,t){for(let i=0,n=t.length;i<n;i++)if(O(e,t[i]))return i;return-1}function B(e,t){return e.length===t.length+1&&O(e.slice(0,t.length),t)}function j(e){return R(e,v)>=0}if(r("item list",b),a("list item renderer",W),d("list placeholder",S),h("label extraction function",P),h("content extraction function",V),u("list of selected paths",v,F),s("selection limit",I),g("selection mode",U,["same-container","any-container"]),a("selection change callback",X),a("item selection callback",D),a("item deselection callback",T),a("item double-click callback",C),u("list of expanded paths",k,F),s("indentation",_),a("expansion change callback",H),a("item expansion callback",A),a("item collapse callback",L),null==W&&(W=function(e,t){return x(si||(si=yi`<div class="ItemLabel">${0}</div>`),P(e))}),null==S&&(S="(empty)"),null==v&&(v=[]),null==I&&(I=1),null==U&&(U="same-container"),null==k&&(k=[]),null==_&&(_=10),v=v.filter(e=>z(e)),v=v.filter((e,t)=>R(e,v)===t),v.length>1&&"same-container"===U){const e=v[0].slice(0,v[0].length-1);v=v.filter(t=>B(t,e))}function Y(t,i){const n=(i.length-1)*_,o=j(i),l=function(e){return R(e,k)>=0}(i);let s=V(t);c(s)||(s=[]);const r=s.length>0;return x(ri||(ri=yi`<div class="ItemView" style="padding-left:${0}px">
          <div class="ItemLine ${0}"
            onClick=${0} onDblClick=${0}
          >
            ${0} ${0}
          </div>
          ${0}
        </div>`),n,o?"selected":"",function(e){!function(e,t,i){if(e.stopImmediatePropagation(),e.preventDefault(),0===I)return;let n,o,l=!1;if(e.shiftKey||e.metaKey)if(l=!0,j(i))o=[i],v=v.filter(e=>!O(i,e));else{const e=i.slice(0,i.length-1);o=v.filter(t=>!B(t,e)),v=v.filter(t=>B(t,e)),v.length===I&&o.push([v.shift()]),n=[i],v.push(i)}else o=v.filter(e=>!O(i,e)),l=!j(i),n=l?[i]:[],v=[i];l&&null!=X&&X(v),null!=o&&null!=T&&o.forEach(e=>{T(E(e),e)}),null!=n&&null!=D&&n.forEach(e=>{D(E(e),e)})}(e,0,i)},function(e){!function(e,t,i){null!=C&&(e.stopImmediatePropagation(),e.preventDefault(),C(t,i,e))}(e,t,i)},r?x(l?ai||(ai=yi`<img class="ItemExpander" src="${0}/caret-down.png"  onClick=${0}/>`):di||(di=yi`<img class="ItemExpander" src="${0}/caret-right.png" onClick=${0}/>`),e.ProtoUX._ImageFolder,function(e){!function(e,t,i){e.stopImmediatePropagation(),e.preventDefault();let n=R(i,k);n<0?k.push(i):k.splice(n,1),null!=H&&H(k),n<0?null!=A&&A(t,i):null!=L&&L(t,i)}(e,t,i)}):x(ui||(ui=yi`<img class="ItemIcon" src="${0}/circle.png"/>`),e.ProtoUX._ImageFolder),W(t,i),r&&l?s.map((e,t)=>Y(e,i.concat(t))):"")}return k=k.filter(e=>z(e)),k=k.filter((e,t)=>R(e,k)===t),x(pi||(pi=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      " ...${0}>
        ${0}
      </>`),Mi("PUX NestedListView Widget",n),i,N,l||"",M,0===b.length?x(hi||(hi=yi`<div class="centered"><span>${0}</></>`),S):b.map((e,t)=>Y(e,[t])))}}),Ii.registerWidgetView("Placeholder",class extends _i{render(e){const t=e.Widget;t.View=this;let{Id:i,Classes:n,Style:o,x:l,y:s,Width:r,Height:u,Substitute:p,Placeholder:h}=t,g=f(t,ue);a("Substitute",p),d("placeholder text",h),null==h&&(h="(empty)");const c=null!=l&&null!=r&&null!=s&&null!=u?`left:${l}px; top:${s}px; width:${r}px; height:${u}px; right:auto; bottom:auto;`:"";return x(gi||(gi=yi`<div class=${0} id=${0} style="
        ${0} ${0}
      ">
        ${0}
      </div>`),Mi("PUX Placeholder Widget",n),i,c,o||"",null==p?x(ci||(ci=yi`<div class="centered"><span>${0}</></>`),h):x($i||($i=yi`<${0} ...${0}/>`),p,g))}});class Ni extends y{render(e){return x(xi||(xi=yi`<div class="centered">
        ${0}
      </div>`),e.children)}}export{vi as DragClickRecognizerFor,Pi as DragRecognizerFor,Ii as ProtoUX,bi as throwError,Wi as throwReadOnlyError};
//# sourceMappingURL=protoux.modern.js.map
